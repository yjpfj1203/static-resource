## mac安装
1. 下载elasticsearch，版本7.4.1
2. 解压文件，删除data目录下的信息，新下载的应该是没有data目录，可以不用处理。
3. 复制5份，可以启动多个实例
4. 修改config/elasticsearch.yml

```
#集群名
cluster.name: es74
#节点名
node.name: es74-03
#可否被选举为master节点配置
node.master: true
# 是否是数据节点
node.data: true

#es绑定地址，支持IPv4及IPv6，默认绑定127.0.0.1；es的HTTP端口和集群通信端口就会监听在此地址上
network.host: 127.0.0.1
#设置对外服务的http端口，默认为9200
http.port: 8853

#下面这行只有node.master为true的时候配置
path.logs: /Users/yjpfj1203/elasticsearch/es-7.4.1/logs/es-03
```
5. 

## elasticsearch节点
### 三种节点类型作用
1. 客户端节点
　　当主节点和数据节点配置都设置为false的时候，该节点只能处理路由请求，处理搜索，分发索引操作等，从本质上来说该客户节点表现为智能负载平衡器。独立的客户端节点在一个比较大的集群中是非常有用的，他协调主节点和数据节点，客户端节点加入集群可以得到集群的状态，根据集群的状态可以直接路由请求。
2. 数据节点
　　数据节点主要是存储索引数据的节点，主要对文档进行增删改查操作，聚合操作等。数据节点对cpu，内存，io要求较高， 在优化的时候需要监控数据节点的状态，当资源不够的时候，需要在集群中添加新的节点。
3. 主节点
　 主资格节点的主要职责是和集群操作相关的内容，如创建或删除索引，跟踪哪些节点是群集的一部分，并决定哪些分片分配给相关的节点。稳定的主节点对集群的健康是非常重要的，默认情况下任何一个集群中的节点都有可能被选为主节点，索引数据和搜索查询等操作会占用大量的cpu，内存，io资源，为了确保一个集群的稳定，分离主节点和数据节点是一个比较好的选择。
### master选举
  当node节点连接不到master时，会发起选举。clusterStateVersion越大优先级越高，version相同时，节点id越小，优先级越大。当某节点被选举次数越过node.master配置为true的数量的一半时，选举完成。
### nodes节点的关闭与开启
1. master节点关闭
假设有多个master候选节点(A，B，C)，如果当前B是master节点，则需要在一分钟后，会重新选举master节点(见master选举方式)。并且，B节点上的数据，会根据分片数量、副本数量重新分配到各个节点。
2. data节点关闭
假设有多个数据节点(D，E，F)，如果关闭D节点，当master确定节点失效后，会根据分片数量、副本数量重新分配到各个节点。**

## 基本概念






